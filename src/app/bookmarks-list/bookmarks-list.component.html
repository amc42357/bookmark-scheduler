<!-- Responsive bookmarks list with icons, edit and remove buttons -->
<div class="bookmarks-list-container">
  <div class="tag-filter-bar" *ngIf="allTags.length > 0 && bookmarks.length > 0">
    <span>Filter by tag:</span>
    <mat-chip-listbox>
      <mat-chip-option *ngFor="let tag of allTags" [selected]="selectedTag === tag" (click)="filterByTag(tag)" (keydown.enter)="filterByTag(tag)">
        {{ tag }}
      </mat-chip-option>
      <mat-chip-option *ngIf="selectedTag" color="primary" (click)="clearTagFilter()" (keydown.enter)="clearTagFilter()">
        Clear
      </mat-chip-option>
    </mat-chip-listbox>
  </div>
  <div class="batch-actions" *ngIf="bookmarks.length > 0">
    <button mat-stroked-button color="warn" (click)="toggleRemoveMode()" [class.active]="removeMode">
      <mat-icon>{{ removeMode ? 'close' : 'delete' }}</mat-icon>
      {{ removeMode ? 'Cancel Remove' : 'Batch Remove' }}
    </button>
    <ng-container *ngIf="removeMode">
      <mat-checkbox [(ngModel)]="selectAllChecked" (change)="toggleSelectAll()">Select All</mat-checkbox>
      <button mat-raised-button color="warn" (click)="removeSelected()" [disabled]="selectedBookmarks.length === 0">Remove Selected</button>
    </ng-container>
  </div>
  <div *ngIf="bookmarks.length === 0" class="empty-message">
    <mat-icon>info</mat-icon> No bookmarks found.
  </div>
  <div *ngFor="let bookmark of filteredBookmarks(); let i = index" class="bookmark-card" [class.remove-mode]="removeMode">
    <mat-checkbox *ngIf="removeMode" [(ngModel)]="bookmark.selected" (change)="onBookmarkSelectChange(bookmark)"></mat-checkbox>
    <div class="bookmark-info">
      <button class="bookmark-title" [ngStyle]="{cursor: 'pointer'}" (click)="openLink(bookmark)">
        <mat-icon>label</mat-icon>
        <span>{{ bookmark.title }}</span>
      </button>
      <div class="bookmark-date-time">
        <mat-icon>event</mat-icon>
        <span>{{ bookmark.date }}</span>
        <mat-icon>schedule</mat-icon>
        <span>{{ bookmark.time }}</span>
        <mat-icon>repeat</mat-icon>
        <span>{{ bookmark.recurrence | titlecase }}</span>
      </div>
      <div class="bookmark-tags">
        <mat-chip-listbox aria-label="Bookmark tags">
          <mat-chip-option *ngFor="let tag of bookmark.tags">{{ tag }}</mat-chip-option>
        </mat-chip-listbox>
      </div>
    </div>
  </div>
</div>